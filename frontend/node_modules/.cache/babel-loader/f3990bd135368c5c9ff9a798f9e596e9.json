{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar spawn = require('child_process').spawn;\nvar packageData = require('../../package.json');\nvar shared = require('../shared');\n\n/**\n * Generates a Transport object for Sendmail\n *\n * Possible options can be the following:\n *\n *  * **path** optional path to sendmail binary\n *  * **newline** either 'windows' or 'unix'\n *  * **args** an array of arguments for the sendmail binary\n *\n * @constructor\n * @param {Object} optional config parameter for Sendmail\n */\nvar SendmailTransport = /*#__PURE__*/function () {\n  function SendmailTransport(options) {\n    _classCallCheck(this, SendmailTransport);\n    options = options || {};\n\n    // use a reference to spawn for mocking purposes\n    this._spawn = spawn;\n    this.options = options || {};\n    this.name = 'Sendmail';\n    this.version = packageData.version;\n    this.path = 'sendmail';\n    this.args = false;\n    this.winbreak = false;\n    this.logger = shared.getLogger(this.options, {\n      component: this.options.component || 'sendmail'\n    });\n    if (options) {\n      if (typeof options === 'string') {\n        this.path = options;\n      } else if (typeof options === 'object') {\n        if (options.path) {\n          this.path = options.path;\n        }\n        if (Array.isArray(options.args)) {\n          this.args = options.args;\n        }\n        this.winbreak = ['win', 'windows', 'dos', '\\r\\n'].includes((options.newline || '').toString().toLowerCase());\n      }\n    }\n  }\n\n  /**\n   * <p>Compiles a mailcomposer message and forwards it to handler that sends it.</p>\n   *\n   * @param {Object} emailMessage MailComposer object\n   * @param {Function} callback Callback function to run when the sending is completed\n   */\n  _createClass(SendmailTransport, [{\n    key: \"send\",\n    value: function send(mail, done) {\n      var _this = this;\n      // Sendmail strips this header line by itself\n      mail.message.keepBcc = true;\n      var envelope = mail.data.envelope || mail.message.getEnvelope();\n      var messageId = mail.message.messageId();\n      var args;\n      var sendmail;\n      var returned;\n      var hasInvalidAddresses = [].concat(envelope.from || []).concat(envelope.to || []).some(function (addr) {\n        return /^-/.test(addr);\n      });\n      if (hasInvalidAddresses) {\n        return done(new Error('Can not send mail. Invalid envelope addresses.'));\n      }\n      if (this.args) {\n        // force -i to keep single dots\n        args = ['-i'].concat(this.args).concat(envelope.to);\n      } else {\n        args = ['-i'].concat(envelope.from ? ['-f', envelope.from] : []).concat(envelope.to);\n      }\n      var callback = function callback(err) {\n        if (returned) {\n          // ignore any additional responses, already done\n          return;\n        }\n        returned = true;\n        if (typeof done === 'function') {\n          if (err) {\n            return done(err);\n          } else {\n            return done(null, {\n              envelope: mail.data.envelope || mail.message.getEnvelope(),\n              messageId: messageId,\n              response: 'Messages queued for delivery'\n            });\n          }\n        }\n      };\n      try {\n        sendmail = this._spawn(this.path, args);\n      } catch (E) {\n        this.logger.error({\n          err: E,\n          tnx: 'spawn',\n          messageId: messageId\n        }, 'Error occurred while spawning sendmail. %s', E.message);\n        return callback(E);\n      }\n      if (sendmail) {\n        sendmail.on('error', function (err) {\n          _this.logger.error({\n            err: err,\n            tnx: 'spawn',\n            messageId: messageId\n          }, 'Error occurred when sending message %s. %s', messageId, err.message);\n          callback(err);\n        });\n        sendmail.once('exit', function (code) {\n          if (!code) {\n            return callback();\n          }\n          var err;\n          if (code === 127) {\n            err = new Error('Sendmail command not found, process exited with code ' + code);\n          } else {\n            err = new Error('Sendmail exited with code ' + code);\n          }\n          _this.logger.error({\n            err: err,\n            tnx: 'stdin',\n            messageId: messageId\n          }, 'Error sending message %s to sendmail. %s', messageId, err.message);\n          callback(err);\n        });\n        sendmail.once('close', callback);\n        sendmail.stdin.on('error', function (err) {\n          _this.logger.error({\n            err: err,\n            tnx: 'stdin',\n            messageId: messageId\n          }, 'Error occurred when piping message %s to sendmail. %s', messageId, err.message);\n          callback(err);\n        });\n        var recipients = [].concat(envelope.to || []);\n        if (recipients.length > 3) {\n          recipients.push('...and ' + recipients.splice(2).length + ' more');\n        }\n        this.logger.info({\n          tnx: 'send',\n          messageId: messageId\n        }, 'Sending message %s to <%s>', messageId, recipients.join(', '));\n        var sourceStream = mail.message.createReadStream();\n        sourceStream.once('error', function (err) {\n          _this.logger.error({\n            err: err,\n            tnx: 'stdin',\n            messageId: messageId\n          }, 'Error occurred when generating message %s. %s', messageId, err.message);\n          sendmail.kill('SIGINT'); // do not deliver the message\n          callback(err);\n        });\n        sourceStream.pipe(sendmail.stdin);\n      } else {\n        return callback(new Error('sendmail was not found'));\n      }\n    }\n  }]);\n  return SendmailTransport;\n}();\nmodule.exports = SendmailTransport;","map":{"version":3,"names":["spawn","require","packageData","shared","SendmailTransport","options","_spawn","name","version","path","args","winbreak","logger","getLogger","component","Array","isArray","includes","newline","toString","toLowerCase","mail","done","message","keepBcc","envelope","data","getEnvelope","messageId","sendmail","returned","hasInvalidAddresses","concat","from","to","some","addr","test","Error","callback","err","response","E","error","tnx","on","once","code","stdin","recipients","length","push","splice","info","join","sourceStream","createReadStream","kill","pipe","module","exports"],"sources":["D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/nodemailer/lib/sendmail-transport/index.js"],"sourcesContent":["'use strict';\n\nconst spawn = require('child_process').spawn;\nconst packageData = require('../../package.json');\nconst shared = require('../shared');\n\n/**\n * Generates a Transport object for Sendmail\n *\n * Possible options can be the following:\n *\n *  * **path** optional path to sendmail binary\n *  * **newline** either 'windows' or 'unix'\n *  * **args** an array of arguments for the sendmail binary\n *\n * @constructor\n * @param {Object} optional config parameter for Sendmail\n */\nclass SendmailTransport {\n    constructor(options) {\n        options = options || {};\n\n        // use a reference to spawn for mocking purposes\n        this._spawn = spawn;\n\n        this.options = options || {};\n\n        this.name = 'Sendmail';\n        this.version = packageData.version;\n\n        this.path = 'sendmail';\n        this.args = false;\n        this.winbreak = false;\n\n        this.logger = shared.getLogger(this.options, {\n            component: this.options.component || 'sendmail'\n        });\n\n        if (options) {\n            if (typeof options === 'string') {\n                this.path = options;\n            } else if (typeof options === 'object') {\n                if (options.path) {\n                    this.path = options.path;\n                }\n                if (Array.isArray(options.args)) {\n                    this.args = options.args;\n                }\n                this.winbreak = ['win', 'windows', 'dos', '\\r\\n'].includes((options.newline || '').toString().toLowerCase());\n            }\n        }\n    }\n\n    /**\n     * <p>Compiles a mailcomposer message and forwards it to handler that sends it.</p>\n     *\n     * @param {Object} emailMessage MailComposer object\n     * @param {Function} callback Callback function to run when the sending is completed\n     */\n    send(mail, done) {\n        // Sendmail strips this header line by itself\n        mail.message.keepBcc = true;\n\n        let envelope = mail.data.envelope || mail.message.getEnvelope();\n        let messageId = mail.message.messageId();\n        let args;\n        let sendmail;\n        let returned;\n\n        const hasInvalidAddresses = []\n            .concat(envelope.from || [])\n            .concat(envelope.to || [])\n            .some(addr => /^-/.test(addr));\n        if (hasInvalidAddresses) {\n            return done(new Error('Can not send mail. Invalid envelope addresses.'));\n        }\n\n        if (this.args) {\n            // force -i to keep single dots\n            args = ['-i'].concat(this.args).concat(envelope.to);\n        } else {\n            args = ['-i'].concat(envelope.from ? ['-f', envelope.from] : []).concat(envelope.to);\n        }\n\n        let callback = err => {\n            if (returned) {\n                // ignore any additional responses, already done\n                return;\n            }\n            returned = true;\n            if (typeof done === 'function') {\n                if (err) {\n                    return done(err);\n                } else {\n                    return done(null, {\n                        envelope: mail.data.envelope || mail.message.getEnvelope(),\n                        messageId,\n                        response: 'Messages queued for delivery'\n                    });\n                }\n            }\n        };\n\n        try {\n            sendmail = this._spawn(this.path, args);\n        } catch (E) {\n            this.logger.error(\n                {\n                    err: E,\n                    tnx: 'spawn',\n                    messageId\n                },\n                'Error occurred while spawning sendmail. %s',\n                E.message\n            );\n            return callback(E);\n        }\n\n        if (sendmail) {\n            sendmail.on('error', err => {\n                this.logger.error(\n                    {\n                        err,\n                        tnx: 'spawn',\n                        messageId\n                    },\n                    'Error occurred when sending message %s. %s',\n                    messageId,\n                    err.message\n                );\n                callback(err);\n            });\n\n            sendmail.once('exit', code => {\n                if (!code) {\n                    return callback();\n                }\n                let err;\n                if (code === 127) {\n                    err = new Error('Sendmail command not found, process exited with code ' + code);\n                } else {\n                    err = new Error('Sendmail exited with code ' + code);\n                }\n\n                this.logger.error(\n                    {\n                        err,\n                        tnx: 'stdin',\n                        messageId\n                    },\n                    'Error sending message %s to sendmail. %s',\n                    messageId,\n                    err.message\n                );\n                callback(err);\n            });\n            sendmail.once('close', callback);\n\n            sendmail.stdin.on('error', err => {\n                this.logger.error(\n                    {\n                        err,\n                        tnx: 'stdin',\n                        messageId\n                    },\n                    'Error occurred when piping message %s to sendmail. %s',\n                    messageId,\n                    err.message\n                );\n                callback(err);\n            });\n\n            let recipients = [].concat(envelope.to || []);\n            if (recipients.length > 3) {\n                recipients.push('...and ' + recipients.splice(2).length + ' more');\n            }\n            this.logger.info(\n                {\n                    tnx: 'send',\n                    messageId\n                },\n                'Sending message %s to <%s>',\n                messageId,\n                recipients.join(', ')\n            );\n\n            let sourceStream = mail.message.createReadStream();\n            sourceStream.once('error', err => {\n                this.logger.error(\n                    {\n                        err,\n                        tnx: 'stdin',\n                        messageId\n                    },\n                    'Error occurred when generating message %s. %s',\n                    messageId,\n                    err.message\n                );\n                sendmail.kill('SIGINT'); // do not deliver the message\n                callback(err);\n            });\n\n            sourceStream.pipe(sendmail.stdin);\n        } else {\n            return callback(new Error('sendmail was not found'));\n        }\n    }\n}\n\nmodule.exports = SendmailTransport;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}