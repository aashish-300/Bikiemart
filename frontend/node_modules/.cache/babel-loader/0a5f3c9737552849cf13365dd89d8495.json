{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar packageData = require('../../package.json');\nvar shared = require('../shared');\n\n/**\n * Generates a Transport object to generate JSON output\n *\n * @constructor\n * @param {Object} optional config parameter\n */\nvar JSONTransport = /*#__PURE__*/function () {\n  function JSONTransport(options) {\n    _classCallCheck(this, JSONTransport);\n    options = options || {};\n    this.options = options || {};\n    this.name = 'JSONTransport';\n    this.version = packageData.version;\n    this.logger = shared.getLogger(this.options, {\n      component: this.options.component || 'json-transport'\n    });\n  }\n\n  /**\n   * <p>Compiles a mailcomposer message and forwards it to handler that sends it.</p>\n   *\n   * @param {Object} emailMessage MailComposer object\n   * @param {Function} callback Callback function to run when the sending is completed\n   */\n  _createClass(JSONTransport, [{\n    key: \"send\",\n    value: function send(mail, done) {\n      var _this = this;\n      // Sendmail strips this header line by itself\n      mail.message.keepBcc = true;\n      var envelope = mail.data.envelope || mail.message.getEnvelope();\n      var messageId = mail.message.messageId();\n      var recipients = [].concat(envelope.to || []);\n      if (recipients.length > 3) {\n        recipients.push('...and ' + recipients.splice(2).length + ' more');\n      }\n      this.logger.info({\n        tnx: 'send',\n        messageId: messageId\n      }, 'Composing JSON structure of %s to <%s>', messageId, recipients.join(', '));\n      setImmediate(function () {\n        mail.normalize(function (err, data) {\n          if (err) {\n            _this.logger.error({\n              err: err,\n              tnx: 'send',\n              messageId: messageId\n            }, 'Failed building JSON structure for %s. %s', messageId, err.message);\n            return done(err);\n          }\n          delete data.envelope;\n          delete data.normalizedHeaders;\n          return done(null, {\n            envelope: envelope,\n            messageId: messageId,\n            message: _this.options.skipEncoding ? data : JSON.stringify(data)\n          });\n        });\n      });\n    }\n  }]);\n  return JSONTransport;\n}();\nmodule.exports = JSONTransport;","map":{"version":3,"names":["packageData","require","shared","JSONTransport","options","name","version","logger","getLogger","component","mail","done","message","keepBcc","envelope","data","getEnvelope","messageId","recipients","concat","to","length","push","splice","info","tnx","join","setImmediate","normalize","err","error","normalizedHeaders","skipEncoding","JSON","stringify","module","exports"],"sources":["D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/nodemailer/lib/json-transport/index.js"],"sourcesContent":["'use strict';\n\nconst packageData = require('../../package.json');\nconst shared = require('../shared');\n\n/**\n * Generates a Transport object to generate JSON output\n *\n * @constructor\n * @param {Object} optional config parameter\n */\nclass JSONTransport {\n    constructor(options) {\n        options = options || {};\n\n        this.options = options || {};\n\n        this.name = 'JSONTransport';\n        this.version = packageData.version;\n\n        this.logger = shared.getLogger(this.options, {\n            component: this.options.component || 'json-transport'\n        });\n    }\n\n    /**\n     * <p>Compiles a mailcomposer message and forwards it to handler that sends it.</p>\n     *\n     * @param {Object} emailMessage MailComposer object\n     * @param {Function} callback Callback function to run when the sending is completed\n     */\n    send(mail, done) {\n        // Sendmail strips this header line by itself\n        mail.message.keepBcc = true;\n\n        let envelope = mail.data.envelope || mail.message.getEnvelope();\n        let messageId = mail.message.messageId();\n\n        let recipients = [].concat(envelope.to || []);\n        if (recipients.length > 3) {\n            recipients.push('...and ' + recipients.splice(2).length + ' more');\n        }\n        this.logger.info(\n            {\n                tnx: 'send',\n                messageId\n            },\n            'Composing JSON structure of %s to <%s>',\n            messageId,\n            recipients.join(', ')\n        );\n\n        setImmediate(() => {\n            mail.normalize((err, data) => {\n                if (err) {\n                    this.logger.error(\n                        {\n                            err,\n                            tnx: 'send',\n                            messageId\n                        },\n                        'Failed building JSON structure for %s. %s',\n                        messageId,\n                        err.message\n                    );\n                    return done(err);\n                }\n\n                delete data.envelope;\n                delete data.normalizedHeaders;\n\n                return done(null, {\n                    envelope,\n                    messageId,\n                    message: this.options.skipEncoding ? data : JSON.stringify(data)\n                });\n            });\n        });\n    }\n}\n\nmodule.exports = JSONTransport;\n"],"mappings":"AAAA,YAAY;;AAAC;AAAA;AAEb,IAAMA,WAAW,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AACjD,IAAMC,MAAM,GAAGD,OAAO,CAAC,WAAW,CAAC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AALA,IAMME,aAAa;EACf,uBAAYC,OAAO,EAAE;IAAA;IACjBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IAEvB,IAAI,CAACA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IAE5B,IAAI,CAACC,IAAI,GAAG,eAAe;IAC3B,IAAI,CAACC,OAAO,GAAGN,WAAW,CAACM,OAAO;IAElC,IAAI,CAACC,MAAM,GAAGL,MAAM,CAACM,SAAS,CAAC,IAAI,CAACJ,OAAO,EAAE;MACzCK,SAAS,EAAE,IAAI,CAACL,OAAO,CAACK,SAAS,IAAI;IACzC,CAAC,CAAC;EACN;;EAEA;AACJ;AACA;AACA;AACA;AACA;EALI;IAAA;IAAA,OAMA,cAAKC,IAAI,EAAEC,IAAI,EAAE;MAAA;MACb;MACAD,IAAI,CAACE,OAAO,CAACC,OAAO,GAAG,IAAI;MAE3B,IAAIC,QAAQ,GAAGJ,IAAI,CAACK,IAAI,CAACD,QAAQ,IAAIJ,IAAI,CAACE,OAAO,CAACI,WAAW,EAAE;MAC/D,IAAIC,SAAS,GAAGP,IAAI,CAACE,OAAO,CAACK,SAAS,EAAE;MAExC,IAAIC,UAAU,GAAG,EAAE,CAACC,MAAM,CAACL,QAAQ,CAACM,EAAE,IAAI,EAAE,CAAC;MAC7C,IAAIF,UAAU,CAACG,MAAM,GAAG,CAAC,EAAE;QACvBH,UAAU,CAACI,IAAI,CAAC,SAAS,GAAGJ,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAACF,MAAM,GAAG,OAAO,CAAC;MACtE;MACA,IAAI,CAACd,MAAM,CAACiB,IAAI,CACZ;QACIC,GAAG,EAAE,MAAM;QACXR,SAAS,EAATA;MACJ,CAAC,EACD,wCAAwC,EACxCA,SAAS,EACTC,UAAU,CAACQ,IAAI,CAAC,IAAI,CAAC,CACxB;MAEDC,YAAY,CAAC,YAAM;QACfjB,IAAI,CAACkB,SAAS,CAAC,UAACC,GAAG,EAAEd,IAAI,EAAK;UAC1B,IAAIc,GAAG,EAAE;YACL,KAAI,CAACtB,MAAM,CAACuB,KAAK,CACb;cACID,GAAG,EAAHA,GAAG;cACHJ,GAAG,EAAE,MAAM;cACXR,SAAS,EAATA;YACJ,CAAC,EACD,2CAA2C,EAC3CA,SAAS,EACTY,GAAG,CAACjB,OAAO,CACd;YACD,OAAOD,IAAI,CAACkB,GAAG,CAAC;UACpB;UAEA,OAAOd,IAAI,CAACD,QAAQ;UACpB,OAAOC,IAAI,CAACgB,iBAAiB;UAE7B,OAAOpB,IAAI,CAAC,IAAI,EAAE;YACdG,QAAQ,EAARA,QAAQ;YACRG,SAAS,EAATA,SAAS;YACTL,OAAO,EAAE,KAAI,CAACR,OAAO,CAAC4B,YAAY,GAAGjB,IAAI,GAAGkB,IAAI,CAACC,SAAS,CAACnB,IAAI;UACnE,CAAC,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;IACN;EAAC;EAAA;AAAA;AAGLoB,MAAM,CAACC,OAAO,GAAGjC,aAAa"},"metadata":{},"sourceType":"script"}