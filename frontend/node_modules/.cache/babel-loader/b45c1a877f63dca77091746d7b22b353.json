{"ast":null,"code":"import _slicedToArray from\"D:/fyp/Ecommerce_Bikiemart/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{Row,Col,Image,ListGroup,Button,Card,Form}from'react-bootstrap';import Rating from'../components/Rating';import Loader from'../components/Loader';import Message from'../components/Message';import{listProductDetails,createProductReview}from'../actions/productActions';import{PRODUCT_CREATE_REVIEW_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductScreen(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productReviewCreate=useSelector(function(state){return state.productReviewCreate;});var loadingProductReview=productReviewCreate.loading,errorProductReview=productReviewCreate.error,successProductReview=productReviewCreate.success;useEffect(function(){if(successProductReview){setRating(0);setComment('');dispatch({type:PRODUCT_CREATE_REVIEW_RESET});}dispatch(listProductDetails(match.params.id));},[dispatch,match,successProductReview]);var addToCartHandler=function addToCartHandler(){history.push(\"/cart/\".concat(match.params.id,\"?qty=\").concat(qty));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createProductReview(match.params.id,{rating:rating,comment:comment}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-success my-3\",children:\"Go Back\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Image,{src:product.image,alt:product.name,fluid:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h3\",{children:product.name})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Rating,{value:product.rating,text:\"\".concat(product.numReviews,\" reviews\"),color:'#f8e825'})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Price: Rs \",product.price]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Description: \",product.description]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Price:\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"RS \",product.price]})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status:\"}),/*#__PURE__*/_jsx(Col,{children:product.countInStock>0?product.countInStock<=5?\"Only \".concat(product.countInStock,\" left\"):'In Stock':/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\",fontWeight:\"bold\"},children:\"Out of Stock\"})})]})}),product.countInStock>0&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Qty\"}),/*#__PURE__*/_jsxs(Col,{xs:\"auto\",className:\"my-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",style:{padding:\"5px 10px\"},onClick:function onClick(){return setQty(Math.max(qty-1,1));},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-3\",children:qty}),/*#__PURE__*/_jsx(Button,{variant:\"success\",style:{padding:\"5px 10px\"},onClick:function onClick(){return setQty(Math.min(qty+1,Math.min(5,product.countInStock)));},children:\"+\"})]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{variant:\"info\",onClick:addToCartHandler,className:\"btn-block\",disabled:product.countInStock==0,type:\"button\",children:\"Add to Cart\"})})]})})})]})})]});}export default ProductScreen;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","Link","Row","Col","Image","ListGroup","Button","Card","Form","Rating","Loader","Message","listProductDetails","createProductReview","PRODUCT_CREATE_REVIEW_RESET","ProductScreen","match","history","qty","setQty","rating","setRating","comment","setComment","dispatch","productDetails","state","loading","error","product","userLogin","userInfo","productReviewCreate","loadingProductReview","errorProductReview","successProductReview","success","type","params","id","addToCartHandler","push","submitHandler","e","preventDefault","image","name","numReviews","price","description","countInStock","color","fontWeight","padding","Math","max","min"],"sources":["D:/fyp/Ecommerce_Bikiemart/frontend/src/screens/ProductScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { Row, Col, Image, ListGroup, Button, Card, Form } from 'react-bootstrap'\nimport Rating from '../components/Rating'\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport { listProductDetails, createProductReview } from '../actions/productActions'\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants'\n\nfunction ProductScreen({ match, history }) {\n    const [qty, setQty] = useState(1)\n    const [rating, setRating] = useState(0)\n    const [comment, setComment] = useState('')\n\n    const dispatch = useDispatch()\n\n    const productDetails = useSelector(state => state.productDetails)\n    const { loading, error, product } = productDetails\n\n    const userLogin = useSelector(state => state.userLogin)\n    const { userInfo } = userLogin\n\n    const productReviewCreate = useSelector(state => state.productReviewCreate)\n    const {\n        loading: loadingProductReview,\n        error: errorProductReview,\n        success: successProductReview,\n    } = productReviewCreate\n\n    useEffect(() => {\n        if (successProductReview) {\n            setRating(0)\n            setComment('')\n            dispatch({ type: PRODUCT_CREATE_REVIEW_RESET })\n        }\n\n        dispatch(listProductDetails(match.params.id))\n\n    }, [dispatch, match, successProductReview])\n\n    const addToCartHandler = () => {\n        history.push(`/cart/${match.params.id}?qty=${qty}`)\n    }\n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        dispatch(createProductReview(\n            match.params.id, {\n            rating,\n            comment\n        }\n        ))\n    }\n\n    return (\n        <div>\n            <Link to='/' className='btn btn-success my-3'>Go Back</Link>\n            {loading ?\n                <Loader />\n                : error\n                    ? <Message variant='danger'>{error}</Message>\n                    : (\n                        <div>\n                            <Row>\n                                <Col md={6}>\n                                    <Image src={product.image} alt={product.name} fluid />\n                                </Col>\n\n\n                                <Col md={3}>\n                                    <ListGroup variant=\"flush\">\n                                        <ListGroup.Item>\n                                            <h3>{product.name}</h3>\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            <Rating value={product.rating} text={`${product.numReviews} reviews`} color={'#f8e825'} />\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            Price: Rs {product.price}\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            Description: {product.description}\n                                        </ListGroup.Item>\n                                    </ListGroup>\n                                </Col>\n\n\n                                <Col md={3}>\n                                    <Card>\n                                        <ListGroup variant='flush'>\n                                            <ListGroup.Item>\n                                                <Row>\n                                                    <Col>Price:</Col>\n                                                    <Col>\n                                                        <strong>RS {product.price}</strong>\n                                                    </Col>\n                                                </Row>\n                                            </ListGroup.Item>\n                                            <ListGroup.Item>\n                                            <Row>\n                                                    <Col>Status:</Col>\n                                                    <Col>\n                                                    {product.countInStock > 0 ? \n                                                    (product.countInStock <= 5 ? \n                                                        `Only ${product.countInStock} left` : \n                                                        'In Stock') : \n                                                        <span style={{color: \"red\", fontWeight: \"bold\"}}>Out of Stock</span> \n  }\n                                                         </Col>\n                                                </Row>\n                                            </ListGroup.Item>\n\n                                            {product.countInStock > 0 && (\n                                            <ListGroup.Item><Row>\n                                                <Col>Qty</Col>\n                                                <Col xs='auto' className='my-1'>\n                                                    <Button variant=\"danger\" style={{ padding: \"5px 10px\" }} onClick={() => setQty(Math.max(qty - 1, 1))}>-</Button>\n                                                    <span className=\"mx-3\">{qty}</span>\n                                                    <Button variant=\"success\" style={{ padding: \"5px 10px\" }} onClick={() => setQty(Math.min(qty + 1, Math.min(5, product.countInStock)))}>+</Button>\n                                                    </Col></Row></ListGroup.Item>\n                                                    )}\n                                                    <ListGroup.Item>\n                                                <Button variant=\"info\"\n                                                    onClick={addToCartHandler}\n                                                    className='btn-block'\n                                                    disabled={product.countInStock == 0}\n                                                    type='button'>\n                                                    Add to Cart\n                                                </Button>\n                                            </ListGroup.Item>\n                                        </ListGroup>\n                                    </Card>\n                                </Col>\n                            </Row>\n                            {/* <Row>\n                                <Col md={6}>\n                                    <h4>Reviews</h4>\n                                    {product.reviews.length === 0 && <Message variant='info'>No Reviews</Message>}\n\n                                    <ListGroup variant='flush'>\n                                        {product.reviews.map((review) => (\n                                            <ListGroup.Item key={review._id}>\n                                                <strong>{review.name}</strong>\n                                                <Rating value={review.rating} color='#f8e825' />\n                                                <p>{review.createdAt.substring(0, 10)}</p>\n                                                <p>{review.comment}</p>\n                                            </ListGroup.Item>\n                                        ))}\n\n                                        <ListGroup.Item>\n                                            <h4>Write a review</h4>\n\n                                            {loadingProductReview && <Loader />}\n                                            {successProductReview && <Message variant='success'>Review Submitted</Message>}\n                                            {errorProductReview && <Message variant='danger'>{errorProductReview}</Message>}\n\n                                            {userInfo ? (\n                                                <Form onSubmit={submitHandler}>\n                                                    <Form.Group controlId='rating'>\n                                                        <Form.Label>Rating</Form.Label>\n                                                        <Form.Control\n                                                            as='select'\n                                                            value={rating}\n                                                            onChange={(e) => setRating(e.target.value)}\n                                                        >\n                                                            <option value=''>Select...</option>\n                                                            <option value='1'>1 - Poor</option>\n                                                            <option value='2'>2 - Fair</option>\n                                                            <option value='3'>3 - Good</option>\n                                                            <option value='4'>4 - Very Good</option>\n                                                            <option value='5'>5 - Excellent</option>\n                                                        </Form.Control>\n                                                    </Form.Group>\n\n                                                    <Form.Group controlId='comment'>\n                                                        <Form.Label>Review</Form.Label>\n                                                        <Form.Control\n                                                            as='textarea'\n                                                            row='5'\n                                                            value={comment}\n                                                            onChange={(e) => setComment(e.target.value)}\n                                                        ></Form.Control>\n                                                    </Form.Group>\n\n                                                    <Button\n                                                        disabled={loadingProductReview}\n                                                        type='submit'\n                                                        variant='primary'\n                                                    >\n                                                        Submit\n                                                    </Button>\n\n                                                </Form>\n                                            ) : (\n                                                    <Message variant='info'>Please <Link to='/login'>login</Link> to write a review</Message>\n                                                )}\n                                        </ListGroup.Item>\n                                    </ListGroup>\n                                </Col>\n                            </Row> */}\n                        </div>\n                    )\n\n            }\n\n\n        </div >\n    )\n}\n\nexport default ProductScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}